var datePickerController;(function(){function r(e){this.defaults={};for(opt in e){this[opt]=this.defaults[opt]=e[opt]}this.date=new Date;this.yearinc=1;this.timer=null;this.pause=1e3;this.timerSet=false;this.fadeTimer=null;this.interval=new Date;this.firstDayOfWeek=this.defaults.firstDayOfWeek=this.dayInc=this.monthInc=this.yearInc=this.opacity=this.opacityTo=0;this.dateSet=null;this.visible=false;this.disabledDates=[];this.enabledDates=[];this.nbsp=String.fromCharCode(160);var t=this;t.events={onblur:function(e){t.removeKeyboardEvents()},onfocus:function(e){t.addKeyboardEvents()},onkeydown:function(e){t.stopTimer();if(!t.visible)return false;if(e==null)e=document.parentWindow.event;var n=e.keyCode?e.keyCode:e.charCode;if(n==13){var i=document.getElementById(t.id+"-date-picker-hover");if(!i||i.className.search(/out-of-range|day-disabled/)!=-1)return t.killEvent(e);t.returnFormattedDate();t.hide();return t.killEvent(e)}else if(n==27){t.hide();return t.killEvent(e)}else if(n==32||n==0){t.date=new Date;t.updateTable();return t.killEvent(e)}if(n>49&&n<56||n>97&&n<104){if(n>96)n-=96-48;n-=49;t.firstDayOfWeek=(t.firstDayOfWeek+n)%7;t.updateTable();return t.killEvent(e)}if(n<37||n>40)return true;var s=(new Date(t.date)).valueOf();if(n==37){if(e.ctrlKey){s=new Date(t.date);s.setDate(Math.min(s.getDate(),r.getDaysPerMonth(s.getMonth()-1,s.getFullYear())));s.setMonth(s.getMonth()-1)}else{s=new Date(t.date.getFullYear(),t.date.getMonth(),t.date.getDate()-1)}}else if(n==39){if(e.ctrlKey){s=new Date(t.date);s.setDate(Math.min(s.getDate(),r.getDaysPerMonth(s.getMonth()+1,s.getFullYear())));s.setMonth(s.getMonth()+1)}else{s=new Date(t.date.getFullYear(),t.date.getMonth(),t.date.getDate()+1)}}else if(n==38){if(e.ctrlKey){s=new Date(t.date);s.setDate(Math.min(s.getDate(),r.getDaysPerMonth(s.getMonth(),s.getFullYear()+1)));s.setFullYear(s.getFullYear()+1)}else{s=new Date(t.date.getFullYear(),t.date.getMonth(),t.date.getDate()-7)}}else if(n==40){if(e.ctrlKey){s=new Date(t.date);s.setDate(Math.min(s.getDate(),r.getDaysPerMonth(s.getMonth(),s.getFullYear()-1)));s.setFullYear(s.getFullYear()-1)}else{s=new Date(t.date.getFullYear(),t.date.getMonth(),t.date.getDate()+7)}}var u=new Date(s);if(t.outOfRange(u))return t.killEvent(e);var a=new Date(t.date);t.date=u;if(a.getFullYear()!=t.date.getFullYear()||a.getMonth()!=t.date.getMonth())t.updateTable();else{t.disableTodayButton();var f=t.table.getElementsByTagName("td");var l;var c=t.date.getDate()-6;if(c<0)c=0;for(var h=c,i;i=f[h];h++){l=Number(i.firstChild.nodeValue);if(isNaN(l)||l!=t.date.getDate())continue;t.removeHighlight();i.id=t.id+"-date-picker-hover";i.className=i.className.replace(/date-picker-hover/g,"")+" date-picker-hover"}}return t.killEvent(e)},gotoToday:function(e){t.date=new Date;t.updateTable();return t.killEvent(e)},onmousedown:function(e){if(e==null)e=document.parentWindow.event;var n=e.target!=null?e.target:e.srcElement;var r=false;while(n.parentNode){if(n.id&&(n.id=="fd-"+t.id||n.id=="fd-but-"+t.id)){r=true;break}try{n=n.parentNode}catch(i){break}}if(r)return true;t.stopTimer();datePickerController.hideAll()},onmouseover:function(e){t.stopTimer();var n=this.firstChild.nodeValue;if(this.className=="out-of-range"||n.search(/^[\d]+$/)==-1)return;t.removeHighlight();this.id=t.id+"-date-picker-hover";this.className=this.className.replace(/date-picker-hover/g,"")+" date-picker-hover";t.date.setDate(this.firstChild.nodeValue);t.disableTodayButton()},onclick:function(e){if(t.opacity!=t.opacityTo||this.className.search(/out-of-range|day-disabled/)!=-1)return false;if(e==null)e=document.parentWindow.event;var n=e.target!=null?e.target:e.srcElement;while(n.nodeType!=1)n=n.parentNode;var r=new Date(t.date);var i=n.firstChild.data;if(i.search(/^[\d]+$/)==-1)return;var s=Number(i);if(isNaN(s)){return true}r.setDate(s);t.date=r;t.returnFormattedDate();if(!t.staticPos)t.hide();t.stopTimer();return t.killEvent(e)},incDec:function(e){if(e==null)e=document.parentWindow.event;var n=e.target!=null?e.target:e.srcElement;if(n&&n.className&&n.className.search("fd-disabled")!=-1){return false}datePickerController.addEvent(document,"mouseup",t.events.clearTimer);t.timerInc=800;t.dayInc=arguments[1];t.yearInc=arguments[2];t.monthInc=arguments[3];t.timerSet=true;t.updateTable();return true},clearTimer:function(e){t.stopTimer();t.timerInc=1e3;t.yearInc=0;t.monthInc=0;t.dayInc=0;datePickerController.removeEvent(document,"mouseup",t.events.clearTimer)}};t.stopTimer=function(){t.timerSet=false;window.clearTimeout(t.timer)};t.removeHighlight=function(){if(document.getElementById(t.id+"-date-picker-hover")){document.getElementById(t.id+"-date-picker-hover").className=document.getElementById(t.id+"-date-picker-hover").className.replace("date-picker-hover","");document.getElementById(t.id+"-date-picker-hover").id=""}};t.reset=function(){for(def in t.defaults){t[def]=t.defaults[def]}};t.setOpacity=function(e){t.div.style.opacity=e/100;t.div.style.filter="alpha(opacity="+e+")";t.opacity=e};t.fade=function(){window.clearTimeout(t.fadeTimer);t.fadeTimer=null;delete t.fadeTimer;var e=Math.round(t.opacity+(t.opacityTo-t.opacity)/4);t.setOpacity(e);if(Math.abs(t.opacityTo-e)>3&&!t.noTransparency){t.fadeTimer=window.setTimeout(t.fade,50)}else{t.setOpacity(t.opacityTo);if(t.opacityTo==0){t.div.style.display="none";t.visible=false}else{t.visible=true}}};t.killEvent=function(e){e=e||document.parentWindow.event;if(e.stopPropagation){e.stopPropagation();e.preventDefault()}return false};t.getElem=function(){return document.getElementById(t.id.replace(/^fd-/,""))||false};t.setRangeLow=function(e){if(String(e).search(/^(\d\d?\d\d)(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])$/)==-1)e="";t.low=t.defaults.low=e;if(t.staticPos)t.updateTable(true)};t.setRangeHigh=function(e){if(String(e).search(/^(\d\d?\d\d)(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])$/)==-1)e="";t.high=t.defaults.high=e;if(t.staticPos)t.updateTable(true)};t.setDisabledDays=function(e){t.disableDays=t.defaults.disableDays=e;if(t.staticPos)t.updateTable(true)};t.setDisabledDates=function(e){var n=[];for(var r=e.length;r--;){if(e[r].match(/^(\d\d\d\d|\*\*\*\*)(0[1-9]|1[012]|\*\*)(0[1-9]|[12][0-9]|3[01])$/)!=-1)n[n.length]=e[r]}if(n.length){t.disabledDates=n;t.enabledDates=[];if(t.staticPos)t.updateTable(true)}};t.setEnabledDates=function(e){var n=[];for(var r=e.length;r--;){if(e[r].match(/^(\d\d\d\d|\*\*\*\*)(0[1-9]|1[012]|\*\*)(0[1-9]|[12][0-9]|3[01]|\*\*)$/)!=-1&&e[r]!="********")n[n.length]=e[r]}if(n.length){t.disabledDates=[];t.enabledDates=n;if(t.staticPos)t.updateTable(true)}};t.getDisabledDates=function(e,n){if(t.enabledDates.length)return t.getEnabledDates(e,n);var i={};var s=r.getDaysPerMonth(n-1,e);n=n<10?"0"+String(n):n;for(var u=t.disabledDates.length;u--;){var a=t.disabledDates[u].replace("****",e).replace("**",n);if(a<Number(String(e)+n+"01")||a>Number(e+String(n)+s))continue;i[a]=1}return i};t.getEnabledDates=function(e,n){var i={};var s=r.getDaysPerMonth(n-1,e);n=n<10?"0"+String(n):n;var u,a,f,l,c,h;for(var p=1;p<=s;p++){u=p<10?"0"+String(p):p;h=true;for(var d=t.enabledDates.length;d--;){a=t.enabledDates[d];c=String(t.enabledDates[d]).substr(0,4);l=String(t.enabledDates[d]).substr(4,2);f=String(t.enabledDates[d]).substr(6,2);if(c==e&&l==n&&f==u){h=false;break}if(c=="****"||l=="**"||f=="**"){if(c=="****")a=a.replace(/^\*\*\*\*/,e);if(l=="**")a=a=a.substr(0,4)+String(n)+a.substr(6,2);if(f=="**")a=a.replace(/\*\*/,u);if(a==String(e+String(n)+u)){h=false;break}}}if(h)i[String(e+String(n)+u)]=1}return i};t.setFirstDayOfWeek=function(e){if(e==null)e=document.parentWindow.event;var n=e.target!=null?e.target:e.srcElement;if(n.tagName.toLowerCase()!="th"){while(n.tagName.toLowerCase()!="th")n=n.parentNode}var r=0;while(n.previousSibling){n=n.previousSibling;if(n.tagName.toLowerCase()=="th")r++}t.firstDayOfWeek=(t.firstDayOfWeek+r)%7;t.updateTableHeaders();return t.killEvent(e)};t.truePosition=function(e){var n=t.cumulativeOffset(e);if(window.opera){return n}var r=document.compatMode&&document.compatMode!="BackCompat"?document.documentElement:document.body;var i=document.all?r.scrollLeft:window.pageXOffset;var s=document.all?r.scrollTop:window.pageYOffset;var u=t.realOffset(e);return[n[0]-u[0]+i,n[1]-u[1]+s]};t.realOffset=function(e){var t=0,n=0;do{t+=e.scrollTop||0;n+=e.scrollLeft||0;e=e.parentNode}while(e);return[n,t]};t.cumulativeOffset=function(e){var t=0,n=0;do{t+=e.offsetTop||0;n+=e.offsetLeft||0;e=e.offsetParent}while(e);return[n,t]};t.resize=function(){if(!t.created||!t.getElem())return;t.div.style.visibility="hidden";if(!t.staticPos){t.div.style.left=t.div.style.top="0px"}t.div.style.display="block";var e=t.div.offsetHeight;var n=t.div.offsetWidth;t.div.style.visibility="visible";t.div.style.display="none";if(!t.staticPos){var r=document.getElementById("fd-but-"+t.id);var i=t.truePosition(r);var s=document.compatMode&&document.compatMode!="BackCompat"?document.documentElement:document.body;var u=window.devicePixelRatio||window.opera?0:s.scrollTop;var a=window.devicePixelRatio||window.opera?0:s.scrollLeft;if(parseInt(s.clientWidth+a)<parseInt(n+i[0])){t.div.style.left=Math.abs(parseInt(s.clientWidth+a-n))+"px"}else{t.div.style.left=i[0]+"px"}if(parseInt(s.clientHeight+u)<parseInt(e+i[1]+r.offsetHeight+2)){t.div.style.top=Math.abs(parseInt(i[1]-(e+2)))+"px"}else{t.div.style.top=Math.abs(parseInt(i[1]+r.offsetHeight+2))+"px"}}};t.equaliseDates=function(){var e=false;var n;for(var r=t.low;r<=t.high;r++){n=String(r);if(!t.disableDays[(new Date(n.substr(0,4),n.substr(6,2),n.substr(4,2))).getDay()-1]){e=true;break}}if(!e)t.disableDays=t.defaults.disableDays=[0,0,0,0,0,0,0]};t.outOfRange=function(e){if(!t.low&&!t.high)return false;var n=false;if(!e){n=true;e=t.date}var r=e.getDate()<10?"0"+e.getDate():e.getDate();var i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1;var s=e.getFullYear();var u=String(s)+String(i)+String(r);if(t.low&&parseInt(u)<parseInt(t.low)){if(!n)return true;t.date=new Date(t.low.substr(0,4),t.low.substr(4,2)-1,t.low.substr(6,2),5,0,0);return false}if(t.high&&parseInt(u)>parseInt(t.high)){if(!n)return true;t.date=new Date(t.high.substr(0,4),t.high.substr(4,2)-1,t.high.substr(6,2),5,0,0)}return false};t.createButton=function(){if(t.staticPos){return}var n;if(!document.getElementById("fd-but-"+t.id)){var r=t.getElem();n=document.createElement("a");n.href="#";var i=document.createElement("span");i.appendChild(document.createTextNode(String.fromCharCode(160)));n.className="date-picker-control";n.title=typeof fdLocale=="object"&&e.locale&&fdLocale.titles.length>5?fdLocale.titles[5]:"";n.id="fd-but-"+t.id;n.appendChild(i);if(r.nextSibling){r.parentNode.insertBefore(n,r.nextSibling)}else{r.parentNode.appendChild(n)}}else{n=document.getElementById("fd-but-"+t.id)}n.onclick=n.onpress=function(e){e=e||window.event;var t=this.id.replace("fd-but-","");try{var n=datePickerController.getDatePicker(t)}catch(r){return false}if(e.type=="press"){var i=e.keyCode!=null?e.keyCode:e.charCode;if(i!=13){return true}if(n.visible){hideAll();return false}}if(!n.visible){datePickerController.hideAll(t);n.show()}else{datePickerController.hideAll()}return false};n=null},t.create=function(){function e(e){var t=document.createElement("th");if(e.thClassName)t.className=e.thClassName;if(e.colspan){t.setAttribute("colspan",e.colspan)}return t}function n(n,r){for(var i=0,s;s=r[i];i++){var u=e(s);n.appendChild(u);var a=document.createElement("span");a.className=s.className;a.id=t.id+s.id;a.appendChild(document.createTextNode(s.text));a.title=s.title||"";if(s.onmousedown)a.onmousedown=s.onmousedown;if(s.onclick)a.onclick=s.onclick;if(s.onmouseout)a.onmouseout=s.onmouseout;u.appendChild(a)}}if(typeof fdLocale=="object"&&t.locale){r.titles=fdLocale.titles;r.months=fdLocale.months;r.fullDay=fdLocale.fullDay;if(fdLocale.dayAbbr)r.dayAbbr=fdLocale.dayAbbr;if(fdLocale.firstDayOfWeek)t.firstDayOfWeek=t.defaults.firstDayOfWeek=fdLocale.firstDayOfWeek}t.div=document.createElement("div");t.div.style.zIndex=9999;t.div.id="fd-"+t.id;t.div.className="datePicker";if(!t.staticPos){document.getElementsByTagName("body")[0].appendChild(t.div)}else{elem=t.getElem();if(!elem){t.div=null;return}t.div.className+=" staticDP";t.div.setAttribute("tabIndex","0");t.div.onfocus=t.events.onfocus;t.div.onblur=t.events.onblur;elem.parentNode.insertBefore(t.div,elem.nextSibling);if(t.hideInput&&elem.type&&elem.type=="text")elem.setAttribute("type","hidden")}var i,s,u,a,f;t.table=document.createElement("table");t.div.appendChild(t.table);a=document.createElement("thead");t.table.appendChild(a);i=document.createElement("tr");a.appendChild(i);t.titleBar=e({thClassName:"date-picker-title",colspan:7});i.appendChild(t.titleBar);i=null;var l=document.createElement("span");l.className="month-display";t.titleBar.appendChild(l);l=document.createElement("span");l.className="year-display";t.titleBar.appendChild(l);l=null;i=document.createElement("tr");a.appendChild(i);n(i,[{className:"prev-but",id:"-prev-year-but",text:"«",title:r.titles[2],onmousedown:function(e){t.events.incDec(e,0,-1,0)},onmouseout:t.events.clearTimer},{className:"prev-but",id:"-prev-month-but",text:"‹",title:r.titles[0],onmousedown:function(e){t.events.incDec(e,0,0,-1)},onmouseout:t.events.clearTimer},{colspan:3,className:"today-but",id:"-today-but",text:r.titles.length>4?r.titles[4]:"Today",onclick:t.events.gotoToday},{className:"next-but",id:"-next-month-but",text:"›",title:r.titles[1],onmousedown:function(e){t.events.incDec(e,0,0,1)},onmouseout:t.events.clearTimer},{className:"next-but",id:"-next-year-but",text:"»",title:r.titles[3],onmousedown:function(e){t.events.incDec(e,0,1,0)},onmouseout:t.events.clearTimer}]);f=document.createElement("tbody");t.table.appendChild(f);for(var c=0;c<7;c++){s=document.createElement("tr");if(c!=0)f.appendChild(s);else a.appendChild(s);for(var h=0;h<7;h++){u=c==0?document.createElement("th"):document.createElement("td");s.appendChild(u);if(c!=0){u.appendChild(document.createTextNode(t.nbsp));u.onmouseover=t.events.onmouseover;u.onclick=t.events.onclick}else{u.className="date-picker-day-header";u.scope="col"}u=null}s=null}var p;var d=t.table.getElementsByTagName("thead")[0].getElementsByTagName("tr")[2].getElementsByTagName("th");for(var v=0;v<7;v++){if(v>0){p=document.createElement("span");p.className="fd-day-header";p.onclick=d[v].onclick=t.setFirstDayOfWeek;p.appendChild(document.createTextNode(t.nbsp));d[v].appendChild(p);p=null}else{d[v].appendChild(document.createTextNode(t.nbsp))}}t.ths=t.table.getElementsByTagName("thead")[0].getElementsByTagName("tr")[2].getElementsByTagName("th");t.trs=t.table.getElementsByTagName("tbody")[0].getElementsByTagName("tr");t.updateTableHeaders();f=a=i=n=e=null;if(t.low&&t.high&&t.high-t.low<7){t.equaliseDates()}t.created=true;if(t.staticPos){var m=document.getElementById(t.id);datePickerController.addEvent(m,"change",t.changeHandler);if(t.splitDate){var g=document.getElementById(t.id+"-mm");var y=document.getElementById(t.id+"-dd");datePickerController.addEvent(g,"change",t.changeHandler);datePickerController.addEvent(y,"change",t.changeHandler)}t.show()}else{t.createButton();t.resize();t.fade()}};t.changeHandler=function(){t.setDateFromInput();t.updateTable()};t.setDateFromInput=function(){function e(e){return String(e).length<2?"00".substring(0,2-String(e).length)+String(e):e}t.dateSet=null;var n=t.getElem();if(!n)return;if(!t.splitDate){var i=datePickerController.dateFormat(n.value,t.format.search(/m-d-y/i)!=-1)}else{var s=document.getElementById(t.id+"-mm");var u=document.getElementById(t.id+"-dd");var a=parseInt(s.tagName.toLowerCase()=="input"?s.value:s.options[s.selectedIndex].value,10);var f=parseInt(u.tagName.toLowerCase()=="input"?u.value:u.options[u.selectedIndex].value,10);var l=parseInt(n.tagName.toLowerCase()=="input"?n.value:n.options[n.selectedIndex||0].value,10);var i=datePickerController.dateFormat(a+"/"+f+"/"+l,true)}var c=false;if(!i){c=true;i=String((new Date).getFullYear())+e((new Date).getMonth()+1)+e((new Date).getDate())}var h,p,d;d=Number(i.substr(0,4));p=Number(i.substr(4,2))-1;h=Number(i.substr(6,2));var v=r.getDaysPerMonth(p,d);if(h>v)h=v;if(new Date(d,p,h)=="Invalid Date"||new Date(d,p,h)=="NaN"){c=true;t.date=new Date;t.date.setHours(5);return}t.date=new Date(d,p,h);t.date.setHours(5);if(!c)t.dateSet=new Date(t.date);e=null};t.setSelectIndex=function(e,t){var n=e.options.length;t=Number(t);for(var r=0;r<n;r++){if(e.options[r].value==t){e.selectedIndex=r;return}}},t.returnFormattedDate=function(){var e=t.getElem();if(!e)return;var n=t.date.getDate()<10?"0"+t.date.getDate():t.date.getDate();var r=t.date.getMonth()+1<10?"0"+(t.date.getMonth()+1):t.date.getMonth()+1;var i=t.date.getFullYear();var s=t.getDisabledDates(i,r);var u=(t.date.getDay()+6)%7;if(!(t.disableDays[u]||String(i)+r+n in s)){if(t.splitDate){var a=document.getElementById(t.id+"-dd");var f=document.getElementById(t.id+"-mm");if(a.tagName.toLowerCase()=="input"){a.value=n}else{t.setSelectIndex(a,n)}if(f.tagName.toLowerCase()=="input"){f.value=r}else{t.setSelectIndex(f,r)}if(e.tagName.toLowerCase()=="input")e.value=i;else{t.setSelectIndex(e,i)}}else{e.value=t.format.replace("y",i).replace("m",r).replace("d",n).replace(/-/g,t.divider)}if(!e.type||e.type&&e.type!="hidden"){e.focus()}if(t.staticPos){t.dateSet=new Date(t.date);t.updateTable()}if(document.createEvent){var l=document.createEvent("HTMLEvents");l.initEvent("change",true,false);e.dispatchEvent(l)}else if(document.createEventObject){e.fireEvent("onchange")}}};t.disableTodayButton=function(){var e=new Date;document.getElementById(t.id+"-today-but").className=document.getElementById(t.id+"-today-but").className.replace("fd-disabled","");if(t.outOfRange(e)||t.date.getDate()==e.getDate()&&t.date.getMonth()==e.getMonth()&&t.date.getFullYear()==e.getFullYear()){document.getElementById(t.id+"-today-but").className+=" fd-disabled";document.getElementById(t.id+"-today-but").onclick=null}else{document.getElementById(t.id+"-today-but").onclick=t.events.gotoToday}};t.updateTableHeaders=function(){var e,n;var i=t.ths;for(var s=0;s<7;s++){e=(t.firstDayOfWeek+s)%7;i[s].title=r.fullDay[e];if(s>0){n=i[s].getElementsByTagName("span")[0];n.removeChild(n.firstChild);n.appendChild(document.createTextNode(r.dayAbbr?r.dayAbbr[e]:r.fullDay[e].charAt(0)));n.title=r.fullDay[e];n=null}else{i[s].removeChild(i[s].firstChild);i[s].appendChild(document.createTextNode(r.dayAbbr?r.dayAbbr[e]:r.fullDay[e].charAt(0)))}}t.updateTable()};t.updateTable=function(e){if(t.timerSet){var n=new Date(t.date);n.setDate(Math.min(n.getDate()+t.dayInc,r.getDaysPerMonth(n.getMonth()+t.monthInc,n.getFullYear()+t.yearInc)));n.setMonth(n.getMonth()+t.monthInc);n.setFullYear(n.getFullYear()+t.yearInc);t.date=n}if(!e&&"onupdate"in datePickerController&&typeof datePickerController.onupdate=="function")datePickerController.onupdate(t);t.outOfRange();t.disableTodayButton();var i=new Date(t.date.getFullYear(),t.date.getMonth(),2);i.setHours(5);var s=i.getMonth();var u=i.getFullYear();var a=t.getDisabledDates(t.date.getFullYear(),t.date.getMonth()+1);var f=new Date;var l=document.getElementById(t.id+"-prev-year-but");l.className=l.className.replace("fd-disabled","");if(t.outOfRange(new Date(u-1,Number(s),r.getDaysPerMonth(Number(s),u-1)))){l.className+=" fd-disabled";if(t.yearInc==-1)t.stopTimer()}l=document.getElementById(t.id+"-prev-month-but");l.className=l.className.replace("fd-disabled","");if(t.outOfRange(new Date(u,Number(s)-1,r.getDaysPerMonth(Number(s)-1,u)))){l.className+=" fd-disabled";if(t.monthInc==-1)t.stopTimer()}l=document.getElementById(t.id+"-next-year-but");l.className=l.className.replace("fd-disabled","");if(t.outOfRange(new Date(u+1,Number(s),1))){l.className+=" fd-disabled";if(t.yearInc==1)t.stopTimer()}l=document.getElementById(t.id+"-next-month-but");l.className=l.className.replace("fd-disabled","");if(t.outOfRange(new Date(u,Number(s)+1,1))){l.className+=" fd-disabled";if(t.monthInc==1)t.stopTimer()}l=null;var c=t.date.getDate();var h=t.date.getMonth();var p=t.date.getFullYear();var d=t.titleBar.getElementsByTagName("span");while(d[0].firstChild)d[0].removeChild(d[0].firstChild);while(d[1].firstChild)d[1].removeChild(d[1].firstChild);d[0].appendChild(document.createTextNode(r.months[h]+t.nbsp));d[1].appendChild(document.createTextNode(p));i.setDate(1);var v,m,g,y,b;var w=(i.getDay()+6)%7;var E=(w-t.firstDayOfWeek+7)%7-1;var S=r.getDaysPerMonth(h,p);var x=f.getDate();var T=f.getMonth();var N=f.getFullYear();var C="class";var k=String(u)+(String(s+1).length<2?"0"+(s+1):s+1);for(var L=0;L<6;L++){y=t.trs[L].getElementsByTagName("td");for(var A=0;A<7;A++){g=y[A];g.removeChild(g.firstChild);g.setAttribute("id","");g.setAttribute("title","");b=L*7+A;if(b>E&&b<=E+S){v=b-E;i.setDate(v);g.appendChild(document.createTextNode(v));if(t.outOfRange(i)){g.setAttribute(C,"out-of-range")}else{m=[];w=(i.getDay()+6)%7;if(v==x&&s==T&&u==N){m.push("date-picker-today")}if(t.dateSet!=null&&t.dateSet.getDate()==v&&t.dateSet.getMonth()==s&&t.dateSet.getFullYear()==u){m.push("date-picker-selected-date")}if(t.disableDays[w]||k+String(v<10?"0"+v:v)in a){m.push("day-disabled")}else if(t.highlightDays[w]){m.push("date-picker-highlight")}if(c==v){g.setAttribute("id",t.id+"-date-picker-hover");m.push("date-picker-hover")}m.push("dm-"+v+"-"+(s+1)+" "+" dmy-"+v+"-"+(s+1)+"-"+u);g.setAttribute(C,m.join(" "));g.setAttribute("title",r.months[h]+t.nbsp+v+","+t.nbsp+p)}}else{g.appendChild(document.createTextNode(t.nbsp));g.setAttribute(C,"date-picker-unused")}}}if(t.timerSet){t.timerInc=50+Math.round((t.timerInc-50)/1.8);t.timer=window.setTimeout(t.updateTable,t.timerInc)}};t.addKeyboardEvents=function(){datePickerController.addEvent(document,"keypress",t.events.onkeydown);if(window.devicePixelRatio){datePickerController.removeEvent(document,"keypress",t.events.onkeydown);datePickerController.addEvent(document,"keydown",t.events.onkeydown)}};t.removeKeyboardEvents=function(){datePickerController.removeEvent(document,"keypress",t.events.onkeydown);datePickerController.removeEvent(document,"keydown",t.events.onkeydown)};t.show=function(){var e=t.getElem();if(!e||t.visible||e.disabled)return;t.reset();t.setDateFromInput();t.updateTable();if(!t.staticPos)t.resize();datePickerController.addEvent(t.staticPos?t.table:document,"mousedown",t.events.onmousedown);if(!t.staticPos){t.addKeyboardEvents()}t.opacityTo=t.noTransparency?99:90;t.div.style.display="block";t.fade();t.visible=true};t.hide=function(){if(!t.visible)return;t.stopTimer();if(t.staticPos)return;datePickerController.removeEvent(document,"mousedown",t.events.onmousedown);datePickerController.removeEvent(document,"mouseup",t.events.clearTimer);t.removeKeyboardEvents();t.opacityTo=0;t.fade();t.visible=false;var e=t.getElem();if(!e.type||e.type&&e.type!="hidden"){e.focus()}};t.destroy=function(){datePickerController.removeEvent(t.staticPos?t.table:document,"mousedown",t.events.onmousedown);datePickerController.removeEvent(document,"mouseup",t.events.clearTimer);t.removeKeyboardEvents();if(t.staticPos){var e=document.getElementById(t.id);datePickerController.removeEvent(e,"change",t.changeHandler);if(t.splitDate){var n=document.getElementById(t.id+"-mm");var r=document.getElementById(t.id+"-dd");datePickerController.removeEvent(n,"change",t.changeHandler);datePickerController.removeEvent(r,"change",t.changeHandler)}t.div.onfocus=t.div.onblur=null}var i=t.table.getElementsByTagName("th");for(var s=0,u;u=i[s];s++){u.onmouseover=u.onmouseout=u.onmousedown=u.onclick=null}var a=t.table.getElementsByTagName("td");for(var s=0,f;f=a[s];s++){f.onmouseover=f.onclick=null}var l=t.table.getElementsByTagName("span");for(var s=0,c;c=l[s];s++){c.onmousedown=c.onclick=c.onkeypress=null}t.ths=t.trs=null;clearTimeout(t.fadeTimer);clearTimeout(t.timer);t.fadeTimer=t.timer=null;if(!t.staticPos&&document.getElementById(t.id.replace(/^fd-/,"fd-but-"))){var c=document.getElementById(t.id.replace(/^fd-/,"fd-but-"));c.onclick=c.onpress=null}if(t.div&&t.div.parentNode){t.div.parentNode.removeChild(t.div)}t.titleBar=t.table=t.div=null;t=null};t.create()}r.languageinfo=navigator.language?navigator.language:navigator.userLanguage;r.languageinfo=r.languageinfo?r.languageinfo.toLowerCase().replace(/-[a-z]+$/,""):"en";var e=document.getElementsByTagName("head")[0].getElementsByTagName("script");var t=e[e.length-1].src.substr(0,e[e.length-1].src.lastIndexOf("/"))+"/lang/"+r.languageinfo+".js";var n=document.createElement("script");n.type="text/javascript";n.src=t;n.setAttribute("charset","utf-8");document.getElementsByTagName("head")[0].appendChild(n);n=null;r.months=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];r.fullDay=["Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"];r.titles=["Mês anterior","Próximo mês","Ano anterior","Próximo ano","Hoje","Mostrar Calendário"];r.getDaysPerMonth=function(e,t){e=(e+12)%12;return 0==t%4&&(0!=t%100||0==t%400)&&e==1?29:[31,28,31,30,31,30,31,31,30,31,30,31][e]};datePickerController=function(){var e={};var t=0;var n=function(e,t,n){if(e.attachEvent){e["e"+t+n]=n;e[t+n]=function(){e["e"+t+n](window.event)};e.attachEvent("on"+t,e[t+n])}else{e.addEventListener(t,n,true)}};var i=function(e,t,n){try{if(e.detachEvent){e.detachEvent("on"+t,e[t+n]);e[t+n]=null}else{e.removeEventListener(t,n,true)}}catch(r){}};var s=function(t){var n;for(n in e){if(!e[n].created||e[n].staticPos)continue;if(t&&t==e[n].id){continue}if(document.getElementById(e[n].id)){e[n].hide()}}};var o=function(){var t;for(t in e){if(!document.getElementById(e[t].id)){if(!e[t].created)continue;e[t].destroy();e[t]=null;delete e[t]}}};var u=function(){for(dp in e){if(!e[dp].created)continue;e[dp].destroy();e[dp]=null;delete e[dp]}e=null;r.script=null;i(window,"load",datePickerController.create);i(window,"unload",datePickerController.destroy)};var a=function(e,t){var n=[{regExp:/^(0?[1-9]|[12][0-9]|3[01])([- \/.])(0?[1-9]|1[012])([- \/.])((\d\d)?\d\d)$/,d:1,m:3,y:5},{regExp:/^(0?[1-9]|1[012])([- \/.])(0?[1-9]|[12][0-9]|3[01])([- \/.])((\d\d)?\d\d)$/,d:3,m:1,y:5},{regExp:/^(\d\d\d\d)([- \/.])(0?[1-9]|1[012])([- \/.])(0?[1-9]|[12][0-9]|3[01])$/,d:5,m:3,y:1}];var r;var i=0;while(i<3){r=(i+(t?4:3))%3;if(e.match(n[r].regExp)){res=e.match(n[r].regExp);y=res[n[r].y];m=res[n[r].m];d=res[n[r].d];if(m.length==1)m="0"+m;if(d.length==1)d="0"+d;if(y.length!=4)y=parseInt(y)<50?"20"+y:"19"+y;return String(y)+m+d}i++}return 0};var f=function(){if(!arguments.length){return[]}var e=[];for(var t=0;t<arguments.length;t++){for(var n=0,r;r=arguments[t][n];n++){e[e.length]=r}}return e};var l=function(t,n){if(!(t in e)){e[t]=new r(n)}};var c=function(t){if(!(t in e)){throw"No datePicker has been created for the form element with an id of '"+t.toString()+"'"}return e[t]};var h=function(e){var t=[];for(var n=0;n<e.options.length;n++){if(e.options[n].value.search(/^\d\d\d\d$/)==-1){continue}if(!t[0]||Number(e.options[n].value)<t[0]){t[0]=Number(e.options[n].value)}if(!t[1]||Number(e.options[n].value)>t[1]){t[1]=Number(e.options[n].value)}}return t};var p=function(e){if(!(typeof document.createElement!="undefined"&&typeof document.documentElement!="undefined"&&typeof document.documentElement.offsetWidth=="number"))return;var n=e&&e.tagName?[e]:f(document.getElementsByTagName("input"),document.getElementsByTagName("select"));var r=/disable-days-([1-7]){1,6}/g;var i=/no-transparency/g;var s=/highlight-days-([1-7]){1,7}/g;var o=/range-low-(\d\d\d\d-\d\d-\d\d)/g;var u=/range-high-(\d\d\d\d-\d\d-\d\d)/g;var a=/format-(d-m-y|m-d-y|y-m-d)/g;var c=/divider-(dot|slash|space|dash)/g;var p=/no-locale/g;var d=/no-fade/g;var v=/hide-input/g;for(var m=0,e;e=n[m];m++){if(e.className&&(e.className.search(a)!=-1||e.className.search(/split-date/)!=-1)&&(e.tagName.toLowerCase()=="input"&&(e.type=="text"||e.type=="hidden")||e.tagName.toLowerCase()=="select")){if(e.id&&document.getElementById("fd-"+e.id)){continue}if(!e.id){e.id="fdDatePicker-"+t++}var g={id:e.id,low:"",high:"",divider:"/",format:"d-m-y",highlightDays:[0,0,0,0,0,1,1],disableDays:[0,0,0,0,0,0,0],locale:e.className.search(p)==-1,splitDate:0,noTransparency:e.className.search(i)!=-1,staticPos:e.className.search(d)!=-1,hideInput:e.className.search(v)!=-1};if(!g.staticPos){g.hideInput=false}else{g.noTransparency=true}if(e.className.search(/split-date/)!=-1){if(document.getElementById(e.id+"-dd")&&document.getElementById(e.id+"-mm")&&document.getElementById(e.id+"-dd").tagName.search(/input|select/i)!=-1&&document.getElementById(e.id+"-mm").tagName.search(/input|select/i)!=-1){g.splitDate=1}}if(e.className.search(a)!=-1){g.format=e.className.match(a)[0].replace("format-","")}if(e.className.search(c)!=-1){var y={dot:".",space:" ",dash:"-",slash:"/"};g.divider=e.className.search(c)!=-1&&e.className.match(c)[0].replace("divider-","")in y?y[e.className.match(c)[0].replace("divider-","")]:"/"}if(e.className.search(s)!=-1){var b=e.className.match(s)[0].replace(/highlight-days-/,"");g.highlightDays=[0,0,0,0,0,0,0];for(var w=0;w<b.length;w++){g.highlightDays[b.charAt(w)-1]=1}}if(e.className.search(r)!=-1){var b=e.className.match(r)[0].replace(/disable-days-/,"");g.disableDays=[0,0,0,0,0,0,0];for(var w=0;w<b.length;w++){g.disableDays[b.charAt(w)-1]=1}}if(e.className.search(/range-low-today/i)!=-1){g.low=datePickerController.dateFormat((new Date).getMonth()+1+"/"+(new Date).getDate()+"/"+(new Date).getFullYear(),true)}else if(e.className.search(o)!=-1){g.low=datePickerController.dateFormat(e.className.match(o)[0].replace(/range-low-/,""),false);if(!g.low){g.low=""}}if(e.className.search(/range-high-today/i)!=-1&&e.className.search(/range-low-today/i)==-1){g.high=datePickerController.dateFormat((new Date).getMonth()+1+"/"+(new Date).getDate()+"/"+(new Date).getFullYear(),true)}else if(e.className.search(u)!=-1){g.high=datePickerController.dateFormat(e.className.match(u)[0].replace(/range-high-/,""),false);if(!g.high){g.high=""}}if(e.tagName.search(/select/i)!=-1){var E=h(e);g.low=g.low?E[0]+String(g.low).substr(4,4):datePickerController.dateFormat(E[0]+"/01/01");g.high=g.high?E[1]+String(g.low).substr(4,4):datePickerController.dateFormat(E[1]+"/12/31")}l(e.id,g)}}};return{addEvent:n,removeEvent:i,create:p,destroy:u,cleanUp:o,addDatePicker:l,getDatePicker:c,dateFormat:a,datePickers:e,hideAll:s}}()})();datePickerController.addEvent(window,"load",datePickerController.create);datePickerController.addEvent(window,"unload",datePickerController.destroy)